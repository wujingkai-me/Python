<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oxygen:wght@300;400;700&family=Red+Hat+Display:wght@400;500;700&display=swap" rel="stylesheet"> 
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@2.7.0/dist/vue.js"></script>
  <style>
    body {font-family: 'Red Hat Display', sans-serif;
    user-select:none;}
  </style>
  <title>Amazonå·¥å…·åˆé›†</title>
</head>
<body class="m-5 h-full bg-slate-50">
  <!-- <div id="logo" class="text-4xl mb-10 font-bold text-gray-400"><font color="red">A</font>mazon <font color="green">T</font>itle <font color="orange">V</font>erify</div> -->
  <div id="root">
    <input type="text" v-model="title" v-on:input="isEmpty" name="title" class="
    outline-none
    border-2
    border-blue-700
    p-2
    pl-6
    rounded-2xl
    w-[70%]
    mr-10
    transition
    focus:drop-shadow-md
  " placeholder="åœ¨è¿™é‡Œè¾“å…¥ä½ çš„æ ‡é¢˜"/>
  <span @click="title=''" style="cursor:pointer" class="transition hover:text-red-600">å­—ç¬¦é•¿åº¦ï¼š<span class="font-bold text-blue-600">{{ title.length }}</span></span>
  <button id="Check" @click="Check" class="
    w-[80px]
    rounded-lg
    ml-3
    p-2
    bg-blue-700
    text-white
    transition

    hover:-translate-y-1
  ">æ ¡éªŒ</button>
  <button id="Check" @click="title=convertFirstLetterToUpperCase(title)" class="
    w-[100px]
    rounded-lg
    ml-3
    p-2
    bg-orange-600
    text-white
    transition

    hover:-translate-y-1
  ">é¦–å­—æ¯å¤§å†™</button>
  <div class="
  w-full
  h-[200px]
  mt-20
  text-left" id="verify">
  
  <template v-if="isGood && isShow">
    <h2 class="text-green-600 text-8xl font-bold">YESğŸ˜Š That's good.</h2>

    <template v-if="hasSuggesstion">
      <h1>æˆ‘ä»¬çš„å»ºè®®</h1>
      <ul>
        <li v-for="item in suggesstionItems" class="list-disc ml-5">{{item}}</li>
      </ul>
    </template>
    <template v-else>
      æˆ‘ä»¬æ²¡æœ‰ä»»ä½•çš„å»ºè®®
    </template>

  </template>


  <template v-else-if="isShow">
    <h2 class="text-red-600 font-bold text-8xl">NOğŸ˜¥, So Bad</h2>
    
    <input type="checkbox" @click="isPrep"> æç¤ºæˆ‘çš„æ˜¯ä»‹è¯ <br><br>
    å«æœ‰é‡å¤å­—ç¬¦è¶…è¿‡3æ¬¡, è¯·å‹¿æ¶æ„ç´¯åŠ å…³é”®è¯, å¦‚æœæ£€æµ‹ä¸ºä»‹è¯å¯å¿½ç•¥(and/or/with/of/for...) å…¶ä»–è¯­è¨€å¯èƒ½æœ‰æ‰€ä¸åŒ, <b>æ³¨æ„ç”„åˆ«</b>
    <br> <br>
    
    <span class="text-2xl leading-tight text-left pt-10" v-html="text"></span>
    <template v-if="title.length >= 180">
      å­—ç¬¦é•¿åº¦éœ€è¦æ³¨æ„ï¼š<strong>{{title.length}}</strong>
    </template>
  
  </template>
</div>
  </div>
</body>
</html>


<script>
  new Vue({
    el: "#root",
    data: {
      title: "",
      isShow: false,
      isGood: false,
      really: false,
      hasSuggesstion: false,
      suggesstionItems: {},
      text: ""
    },
    methods: {
      isEmpty() {
        if(this.title == "") {
          this.isGood = false
          this.really = false
          this.isShow = false 
        }
      },
      convertFirstLetterToUpperCase(str) {
        var splitStr = str.toLowerCase().split(' ');
        for (var i = 0; i < splitStr.length; i++) {
            splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     
        }
        
        return splitStr.join(' '); 
      },
      Check() {
        if(this.really) return
        verifyTitle = this.title.split(" ")
        var repeatList = []
        const repeatCount = 2; // é‡å¤æ¬¡æ•°

        for(let i = 0; i < verifyTitle.length; i ++) {
          let repeatNum = 0
          let repeatElement

          // æŸ¥æ‰¾é‡å¤å…ƒç´ 
          for(let j = i + 1; j < verifyTitle.length; j ++) {
            if(verifyTitle[i] == verifyTitle[j])
              repeatNum ++
              repeatElement = verifyTitle[i]
          }
               
          // æŸ¥æ‰¾æ˜¯å¦æœ‰æ²¡æœ‰é¦–å­—æ¯å¤§å†™çš„
          if(verifyTitle[i][0] != this.convertFirstLetterToUpperCase(verifyTitle[i][0])){
            this.hasSuggesstion = true
            this.suggesstionItems.cap = "é¦–å­—æ¯å¯èƒ½æ²¡æœ‰å¤§å†™"
          
          } else {
            this.hasSuggesstion = false
            this.suggesstionItems = {}
          }

          // æŸ¥æ‰¾æ˜¯å¦æœ‰å…¨é¦–å­—æ¯å¤§å†™çš„
          console.log(verifyTitle[i] + "<============>" + verifyTitle[i].toUpperCase())
          if(verifyTitle[i] == verifyTitle[i].toUpperCase()) {
            this.hasSuggesstion = true
            this.suggesstionItems.fullCap = "è¯¥é¦–å­—æ¯å…¨å¤§å†™ï¼š" + verifyTitle[i] + ", å¯èƒ½æ˜¯è¿ç¦è¯, è¯·æ£€æŸ¥"
          } else if(!this.hasSuggesstion){
            this.hasSuggesstion = false
            this.suggesstionItems = {}
          }
          if(repeatNum >= repeatCount) {
            repeatList.push(repeatElement)
          }
        }

        this.isGood = true

        for (let index = 0; index < repeatList.length; index++) {
          for(let original = 0; original < verifyTitle.length; original++){
            if(repeatList[index] == verifyTitle[original]){
              verifyTitle[original] = "<b><font color='red'>" + verifyTitle[original] + "</font></b>"
              this.isGood = false
            }
            else {
              verifyTitle[original] = "<font color='grey'>" + verifyTitle[original] + "</font>"
            }
          }
        }

        this.text = verifyTitle.join(" ")
        this.isShow = true
        
        // console.log(verifyTitle.toString())
      },
      isPrep(e) {
        if(e.target.checked)
          this.isGood = true
          this.really = true
      }
    }


  })
</script>